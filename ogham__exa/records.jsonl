{"repo":"ogham/exa","pull_number":552,"instance_id":"ogham__exa-552","issue_numbers":[548],"base_commit_sha":"69827e05f39489e091dc7b1c2dae85dfcb3d865a","patch":"diff --git a/src/output/grid.rs b/src/output/grid.rs\nindex bac692c..f271f56 100644\n--- a/src/output/grid.rs\n+++ b/src/output/grid.rs\n@@ -63,6 +63,9 @@ impl<'a> Render<'a> {\n             // This isnâ€™t *quite* the same as the lines view, which also\n             // displays full link paths.\n             for file in &self.files {\n+                if self.opts.icons {\n+                    write!(w, \"{}\", painted_icon(&file, &self.style))?;\n+                }\n                 let name_cell = self.style.for_file(file, self.colours).paint();\n                 writeln!(w, \"{}\", name_cell.strings())?;\n             }\n","test_patch":"","problem_statement":"Icons fail to display if the files are displayed in 1 column\nIcons fail to display if:\r\n\r\n* `-l` (`--long`) is **not** specified,\r\n* there are two or more files, and\r\n* the file names are long enough that only one column will fit.\r\n\r\nSteps to reproduce:\r\n\r\n```console\r\n$ > aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.txt\r\n$ > bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.txt\r\n$ exa --icons\r\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.txt\r\nbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.txt\r\n```\r\n\r\nThe file names may need to be longer if your terminal is wide enough.\r\n\r\nexa version: built from master branch (commit 89c861f)","pull_message":"Display icons when file names are too long for grid\nFixes #548","hints":[],"created_at":"2019-07-31T01:35:40Z","cursor":"Y3Vyc29yOnYyOpK5MjAxOS0wNy0zMVQwOTozNTo0MCswODowMM4SC6hs","merge_commit_sha":"404ed20fd35900330e4101a79c4683ba7be26107","test_files":[],"precommit_script":"","setup_command":"#!/usr/bin/env bash\nset -euo pipefail\n\n# Minimal setup script to install Rust toolchain and cargo2junit for producing JUnit XML\n# This script does not use sudo. It installs rustup (if not present) and then installs cargo2junit.\n\n# If rustc already exists and is reasonably recent, skip rustup installation\nif command -v rustc >/dev/null 2>&1; then\n  echo \"rustc found: $(rustc --version)\"\nelse\n  echo \"Installing rustup and Rust toolchain...\"\n  # Install rustup non-interactively\n  curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y\n  # shellcheck disable=SC1090\n  source \"$HOME/.cargo/env\"\nfi\n\n# Ensure cargo is available in PATH\nif ! command -v cargo >/dev/null 2>&1; then\n  echo \"cargo not found even after rustup; aborting\"\n  exit 1\nfi\n\n# Try to ensure the toolchain matches project requirement if specified\n# The project requests rust 1.66.1; attempt to install that toolchain if possible\nif rustup toolchain list >/dev/null 2>&1; then\n  if ! rustup toolchain list | grep -q \"1.66.1\"; then\n    echo \"Installing rust toolchain 1.66.1 (may take a while)...\"\n    rustup toolchain install 1.66.1 || true\n  fi\n  # Use the toolchain if installed\n  if rustup toolchain list | grep -q \"1.66.1\"; then\n    rustup default 1.66.1 || true\n  fi\nfi\n\n# Ensure cargo is usable\necho \"Using cargo: $(cargo --version)\"\n\n# Install cargo2junit to convert cargo JSON output to JUnit XML\n# If already installed, skip\nif command -v cargo2junit >/dev/null 2>&1; then\n  echo \"cargo2junit already installed: $(cargo2junit --version 2>/dev/null || true)\"\nelse\n  echo \"Installing cargo2junit (may take a while)...\"\n  # Try installing using the project's default toolchain first\n  if ! cargo install cargo2junit --version \"0.1.13\"; then\n    # If that fails due to an old rust toolchain, try installing with the latest stable toolchain\n    echo \"Falling back to installing cargo2junit using the 'stable' toolchain\"\n    rustup toolchain install stable || true\n    rustup run stable cargo install cargo2junit || true\n  fi\nfi\n\necho \"Setup complete\"\n\ncargo fetch --locked\n","test_command":"","additions":3,"deletions":0,"file_changes":1,"image":"acvdpwu2p001dcr.azurecr.io/ogham__exa-552:20251201"}
