{"repo": "jtroo/kanata", "pull_number": 454, "instance_id": "jtroo__kanata-454", "issue_numbers": [449], "base_commit_sha": "98625e972e2ee18cbff73f5d2110fe68159927a3", "patch": "diff --git a/src/trie.rs b/src/trie.rs\nindex 60a0d74..31f2696 100644\n--- a/src/trie.rs\n+++ b/src/trie.rs\n@@ -53,7 +53,9 @@ impl Trie {\n                         }\n                     }\n                     None => {\n-                        unreachable!(\"subtrie should have a key\")\n+                        // Note: None happens if there are multiple children. The sequence is still\n+                        // in the trie.\n+                        InTrie\n                     }\n                 }\n             }\n", "test_patch": "", "problem_statement": "Bug: kanata crashes randomly when typing a sequence in the latest build\n**Describe the bug**\r\nwhen i type a sequence, i get this error: \r\nthread '<unnamed>' panicked at 'internal error: entered unreachable code: subtrie should have a key', src\\trie.rs:56:25\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\nerror: process didn't exit successfully: `target\\release\\kanata.exe --cfg c:/users/rizq/documents/doffed-kanata.kbd` (exit code: 0xc0000409, STATUS_STACK_BUFFER_OVERRUN)\r\n\r\n**Relevant kanata configs**\r\nhere's my config (though this bug should appear with any config that has sequences):\r\n```\r\n(defcfg\r\n  sequence-input-mode visible-backspaced\r\n  sequence-timeout 500\r\n  danger-enable-cmd yes\r\n  delegate-to-first-layer yes\r\n)\r\n\r\n(defsrc\r\n  esc   1     2     3     4     5     6     7     8     9     0     -     =     bspc\r\n  tab   q     w     e     r     t     y     u     i     o     p     [     ]     \\\r\n  caps  a     s     d     f     g     h     j     k     l     ;     '     ret\r\n  lsft  z     x     c     v     b     n     m     ,     .     /     rsft\r\n  lctl  lmet  lalt              spc               ralt  rmet\r\n)\r\n\r\n;; defines variables, t for tap-hold/tap-dance, d for one-shot\r\n(defvar t 150 d 500 max 65535 half 32769)\r\n\r\n;; main layer\r\n(deflayer maya\r\n  @grl  1     2     3     4     5     6     7     8     9     0     [     ]     @numnf\r\n  tab   b     l     d     g     q     j     f     o     u     @pcb  ;     =     \\\r\n  @bnav n     @chr  @cht  @chs  @chv  k     h     a     e     i     @oss  ret\r\n  @oss  @chx  @chm  @chc  @chw  z     p     y     '     /     @cms  @dsht\r\n  @mods lmet  @rsym             @sseq             ralt  rmet\r\n)\r\n\r\n(deflayer qwerty\r\n  @esl  1     2     3     4     5     6     7     8     9     0     -     =     bspc\r\n  tab   q     w     e     r     t     y     u     i     o     p     [     ]     \\\r\n  caps  a     s     d     f     g     h     j     k     l     ;     '     ret \r\n  lsft  z     x     c     v     b     n     m     ,     .     /     rsft\r\n  lctl  lmet  lalt              spc               ralt  rmet\r\n)\r\n\r\n(deflayer mouse\r\n  _      _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _      b     mrgt  d     mlft  q     mmid  mlft  @mwu  mrgt  _     _     _     _\r\n  C-bspc n     r     t     s     v     _     @mlft @mdn  @mup  @mrgt _     _\r\n  _      C-w   m     c     w     z     @my   mbtp  @mwd  mftp  _     _ \r\n  @grd   _     _                 @slw              _     _\r\n)\r\n\r\n(deflayer slow_mouse\r\n  _      _     _     _     _     _     _     _      _     _     _      _     _     _\r\n  _      _     _     _     _     _     mmid  mlft   @mwu  mrgt  _      _     _     _\r\n  C-bspc _     _     _     _     _     @mos  @smlf  @smdn @smup @smrg  _     _\r\n  _      _     _     _     _     _     @my   mbtp   @mwd  mftp  _      _ \r\n  _      _     _                 _                  _     _\r\n)\r\n\r\n(deflayer grid_mouse\r\n  _     _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     _     _     _     _     _     _     @r1c1 @r1c2 @r1c3 @r1c4 _     _     _\r\n  _     _     _     _     _     _     @mos  @r2c1 @r2c2 @r2c3 @r2c4 _     _\r\n  _     _     _     _     _     _     @my   @r3c1 @r3c2 @r3c3 @r3c4 _ \r\n  _     _     _                 _                 _     _\r\n)\r\n\r\n;; sym layer, prob wiil add aliases for shifted keys\r\n(deflayer sym\r\n  _     _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     4     2     3     1     5     6     0     8     9     7     S-,   _     _\r\n  `     S-4   +     S-9   S-0   S-`   \\     -     =     S--   S-8   S-.   _\r\n  S-\\   S-3   S-[   S-]   S-1   S-2   S-7   [     ]     S-5   S-6   _ \r\n  lmet  _     _                 _                 _     _\r\n)\r\n\r\n(deflayer nav\r\n  _     _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     _     _     _     _     _     esc   ret   pgup  home  _     _     _     _\r\n  _     lmet  lalt  lsft  lctl  @dr   ins   lft   down  up    rght  _     _\r\n  _     _     _     tab   @dp   _     prnt  del   pgdn  end   _     _ \r\n  _     _     _                 _                 _     _\r\n)\r\n\r\n;; homerow mods\r\n(deflayer mods\r\n\r\n  _     _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     @metn @altr @sftt @ctls _     _     @ctlh @sfta @alte @meti _     _\r\n  _     _     _     _     _     _     _     _     _     _     _     _ \r\n  _     _     _                 bspc              _     _\r\n)\r\n\r\n(deflayer cub1\r\n\r\n  _      _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _      @z'   @B    @L'   @l'   @x    @u    @r    @R    @B'   @z    _     _     _\r\n  C-bspc @y'   @D    @L    @U'   @F'   @F    @U    @R'   @D'   @y    _     _\r\n  @f'    @S'   @M'   @l    @my   @u'   @x'   @r'   @M    @S    @f    _ \r\n  _      _     _                 @cub2             _     _\r\n)\r\n\r\n(deflayer cub2\r\n\r\n  _     _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     _     @d    _     _     _     _     _     _     @d'   _     _     _\r\n  _     _     _     _     _     _     _     _     _     _     _     _ \r\n  _     _     _                 _                 _     _\r\n)\r\n\r\n(defalias\r\n  ;; multi-function keys\r\n  grl (tap-hold $t $t grv (layer-toggle layouts))\r\n  esl (tap-hold $t $t esc (layer-toggle layouts))\r\n  rsym (tap-hold $t $t rpt (layer-toggle sym))\r\n  bnav (tap-hold $t $t C-bspc (layer-toggle nav))\r\n  mods (layer-toggle mods)\r\n  oss (one-shot $d lsft)\r\n  sseq (multi spc sldr) ;; used for emoji and cmini sequences\r\n  dsht (tap-dance $t (- (cmd powershell shutdown /s /t 0)))\r\n  numnf (tap-dance $t ((cmd-output-keys powershell.exe \"if ($([console]::NumberLock) -match 'True') { echo '()' } else { echo '(nlck)' }\") (cmd-output-keys powershell.exe \"if ($([console]::NumberLock) -match 'True') { echo '(nlck)' } else { echo '()' }\")))\r\n  cms (tap-dance $t (, (layer-switch mouse)))\r\n  mos (layer-switch mouse)\r\n  pcb (tap-dance $t (. (layer-switch cub1)))\r\n\r\n  ;; layouts\r\n  my (layer-switch maya)\r\n  tp (layer-switch l0)\r\n  qwr (layer-switch qwerty)\r\n\r\n  ;; consonant hand chord definitions\r\n  chr (chord cc r)\r\n  chs (chord cc s)\r\n  chc (chord cc c)\r\n  chw (chord cc w)\r\n  cht (chord cc t)\r\n  chv (chord cc v)\r\n  chm (chord cc m)\r\n  chx (chord cc x)\r\n\r\n  ;; dynamic macros\r\n  dr (dynamic-macro-record 0)\r\n  dp (dynamic-macro-play 0)\r\n\r\n  ;; taipo chords\r\n  ph (chord l0 ph)\r\n  rh (chord l0 rh)\r\n  mh (chord l0 mh)\r\n  ih (chord l0 ih)\r\n\r\n  pu (chord l0 pu)\r\n  ru (chord l0 ru)\r\n  mu (chord l0 mu)\r\n  iu (chord l0 iu)\r\n\r\n  ph1 (chord l1 ph1)\r\n  rh1 (chord l1 rh1)\r\n  mh1 (chord l1 mh1)\r\n  ih1 (chord l1 ih1)\r\n\r\n  pu1 (chord l1 pu1)\r\n  ru1 (chord l1 ru1)\r\n  mu1 (chord l1 mu1)\r\n  iu1 (chord l1 iu1)\r\n\r\n  ph2 (chord l2 ph2)\r\n  rh2 (chord l2 rh2)\r\n  mh2 (chord l2 mh2)\r\n  ih2 (chord l2 ih2)\r\n\r\n  pu2 (chord l2 pu2)\r\n  ru2 (chord l2 ru2)\r\n  mu2 (chord l2 mu2)\r\n  iu2 (chord l2 iu2)\r\n\r\n  ;; taipo layers\r\n  l0 (layer-toggle l0)\r\n  l1 (layer-toggle l1)\r\n  l2 (layer-toggle l2)\r\n\r\n  ;; homerow mods\r\n  metn (tap-hold $t $t n (one-shot $d lmet))\r\n  altr (tap-hold $t $t r (one-shot $d lalt))\r\n  sftt (tap-hold $t $t t (one-shot $d lsft))\r\n  ctls (tap-hold $t $t s (one-shot $d lctl))\r\n\r\n  ctlh (tap-hold $t $t h (one-shot $d rctl))\r\n  sfta (tap-hold $t $t a (one-shot $d rsft))\r\n  alte (tap-hold $t $t e (one-shot $d lalt))\r\n  meti (tap-hold $t $t i (one-shot $d lmet))\r\n\r\n  ;; mouse movement\r\n  mwu (mwheel-up 50 120)\r\n  mwd (mwheel-down 50 120)\r\n  mup (movemouse-accel-up 1 1000 1 5)\r\n  mlft (movemouse-accel-left 1 1000 1 5)\r\n  mdn (movemouse-accel-down 1 1000 1 5)\r\n  mrgt (movemouse-accel-right 1 1000 1 5)\r\n\r\n  smup (movemouse-up 3 1)\r\n  smlf (movemouse-left 3 1)\r\n  smdn (movemouse-down 3 1)\r\n  smrg (movemouse-right 3 1)\r\n\r\n  r1c1 (tap-dance $t ((setmouse 8192 10923) (setmouse 1 1)))\r\n  r1c2 (tap-dance $t ((setmouse 24576 10923) (setmouse 24576 1)))\r\n  r1c3 (tap-dance $t ((setmouse 40960 10923) (setmouse 40960 1)))\r\n  r1c4 (tap-dance $t ((setmouse 57344 10923) (setmouse $max 1)))\r\n  r2c1 (setmouse 8192 $half)\r\n  r2c2 (tap-dance $t ((setmouse 24576 $half) (setmouse $half $half)))\r\n  r2c3 (setmouse 40960 $half)\r\n  r2c4 (setmouse 57344 $half)\r\n  r3c1 (tap-dance $t ((setmouse 8192 54615) (setmouse 1 $max)))\r\n  r3c2 (tap-dance $t ((setmouse 24576 54615) (setmouse 24576 $max)))\r\n  r3c3 (tap-dance $t ((setmouse 40960 54615) (setmouse 40960 $max)))\r\n  r3c4 (tap-dance $t ((setmouse 57344 54615) (setmouse $max $max)))\r\n\r\n  ;; mouse layers\r\n  slw (layer-toggle slow_mouse)\r\n  grd (layer-toggle grid_mouse)\r\n\r\n  ;; taipo fn for typing f keys\r\n  fn (macro sldr 10 f24)\r\n\r\n  ;; cubing moves\r\n  R (tap-dance $t ((macro S-r spc) (macro S-r kp2 spc)))\r\n  R' (tap-dance $t ((macro S-r ' spc) (macro S-r kp2 ' spc)))\r\n  U (tap-dance $t ((macro S-u spc) (macro S-u kp2 spc)))\r\n  U' (tap-dance $t ((macro S-u ' spc) (macro S-u kp2 ' spc)))\r\n  F (tap-dance $t ((macro S-f spc) (macro S-f kp2 spc)))\r\n  F' (tap-dance $t ((macro S-f ' spc) (macro S-f kp2 ' spc)))\r\n  L (tap-dance $t ((macro S-l spc) (macro S-l kp2 spc)))\r\n  L' (tap-dance $t ((macro S-l ' spc) (macro S-l kp2 ' spc)))\r\n  D (tap-dance $t ((macro S-d spc) (macro S-d kp2 spc)))\r\n  D' (tap-dance $t ((macro S-d ' spc) (macro S-d kp2 ' spc)))\r\n  B (tap-dance $t ((macro S-b spc) (macro S-b kp2 spc)))\r\n  B' (tap-dance $t ((macro S-b ' spc) (macro S-b kp2 ' spc)))\r\n\r\n  r (tap-dance $t ((macro r spc) (macro r kp2 spc)))\r\n  r' (tap-dance $t ((macro r ' spc) (macro r kp2 ' spc)))\r\n  u (tap-dance $t ((macro u spc) (macro u kp2 spc)))\r\n  u' (tap-dance $t ((macro u ' spc) (macro u kp2 ' spc)))\r\n  l (tap-dance $t ((macro l spc) (macro l kp2 spc)))\r\n  l' (tap-dance $t ((macro l ' spc) (macro l kp2 ' spc)))\r\n  f (tap-dance $t ((macro f spc) (macro f kp2 spc)))\r\n  f' (tap-dance $t ((macro f ' spc) (macro f kp2 ' spc)))\r\n  d (tap-dance $t ((macro d spc) (macro d kp2 spc)))\r\n  d' (tap-dance $t ((macro d ' spc) (macro d kp2 ' spc)))\r\n\r\n  M (tap-dance $t ((macro S-m spc) (macro S-m kp2 spc)))\r\n  M' (tap-dance $t ((macro S-m ' spc) (macro S-m kp2 ' spc)))\r\n  S (tap-dance $t ((macro S-s spc) (macro S-s kp2 spc)))\r\n  S' (tap-dance $t ((macro S-s ' spc) (macro S-s kp2 ' spc)))\r\n\r\n  y (tap-dance $t ((macro y spc) (macro y kp2 spc)))\r\n  y' (tap-dance $t ((macro y ' spc) (macro y kp2 spc)))\r\n  x (tap-dance $t ((macro x spc) (macro x kp2 spc)))\r\n  x' (tap-dance $t ((macro x ' spc) (macro x kp2 spc)))\r\n  z (tap-dance $t ((macro z spc) (macro z kp2 spc)))\r\n  z' (tap-dance $t ((macro z ' spc) (macro z kp2 spc)))\r\n\r\n  cub2 (layer-toggle cub2)\r\n)\r\n\r\n;; consonant hand chords\r\n(defchords cc 30\r\n  (r              ) r\r\n  (  s            ) s\r\n  (    c          ) c\r\n  (      w        ) w\r\n  (        t      ) t\r\n  (          v    ) v\r\n  (            m  ) m\r\n  (              x) x\r\n  (r s            ) (macro r l)\r\n  (r     w        ) (macro s c)\r\n  (r     w t      ) (macro s c r)\r\n  (r s     t      ) (macro r l d)\r\n  (    c   t      ) (multi (one-shot 50 lctl) c)\r\n  (        t v    ) (multi (one-shot 50 lctl) v)\r\n  (    c       m  ) (macro m b)\r\n  (            m x) (macro b l)\r\n  (    c w     m  ) (macro s i d)\r\n)\r\n\r\n;; used for sequences\r\n(deffakekeys\r\n  ;; taipo f key sequences\r\n  f1 f1\r\n  f2 f2\r\n  f3 f3\r\n  f4 f4\r\n  f5 f5\r\n  f6 f6\r\n  f7 f7\r\n  f8 f8\r\n  f9 f9\r\n  f10 f10\r\n  f11 f11\r\n  f12 f12\r\n\r\n  ;; emoji sequences\r\n  dbl (macro S-; d o f b l u s h S-; spc)\r\n  dnn (macro S-; d o f n i n i S-; spc)\r\n  dtv (macro S-; d o f t e c t i v e S-; spc)\r\n  dsm (macro S-; d o f s m i e S-; spc)\r\n  dbn (macro S-; d o f b l a n k e e S-; spc)\r\n  dxy (macro S-; o x e y S-; spc)\r\n  dcb (macro S-; d o f c u b e S-; spc)\r\n  dwi (macro S-; d o f w i t h i t S-; spc)\r\n  dgn (macro S-; d o f g u n S-; spc)\r\n  ddg (macro S-; d o f d g e S-; spc)\r\n  dwn (macro S-; d o f S-w S-; spc)\r\n  dqn (macro S-; d o f q u e e n S-; spc)\r\n  dsi (macro S-; d o f i s s u e S-; spc)\r\n  dkl (macro S-; d o f a k l S-; spc)\r\n  dtr (macro S-; d o f t l d r S-; spc)\r\n  djl (macro S-; d o f j a i l S-; spc)\r\n  smd (macro S-; s m i e d o f S-; spc)\r\n  dcn (macro S-; b u s h d o f S-; spc)\r\n  dns (macro S-; d o f n i n i s S-; spc)\r\n  dbr (macro S-; d o f b r i a n S-; spc)\r\n  sbc (macro S-; S-s o b S-c a t S-; spc)\r\n  ymc (macro S-; S-y u m S-c a t S-; spc)\r\n  wgc (macro S-; S-w o a g S-c a t S-; spc)\r\n  wrc (macro S-; S-w o r r i e d S-c a t S-; spc)\r\n  mnc (macro S-; S-m e n a c e S-c a t S-; spc)\r\n  hec (macro S-; h e a r t S-- e y e s S-- c a t S-; spc)\r\n  blc (macro S-; S-f l u s h e d S-c a t S-; spc)\r\n  htc (macro S-; S-h o t S-c a t S-; spc)\r\n  cdc (macro S-; S-c o l d S-c a t S-; spc)\r\n  pnc (macro S-; S-p e n s i v e S-c a t S-; spc)\r\n  ywc (macro S-; S-y a w n i n g S-c a t S-; spc)\r\n  csp (macro S-; c a t s p a i r S-; spc)\r\n  pbg (macro S-; b u g S-; spc)\r\n  rbg (macro S-; r a r e b u g S-; spc)\r\n  bbg (macro S-; b u g g i g n S-; spc)\r\n  wpy (macro S-; w o o p e r S-;)\r\n  wpn (macro S-; w o o p e r n o S-;)\r\n  dpt (macro S-; d o f p e t S-;)\r\n  flc (macro S-; S-f l u s h e d S-c a t S-;)\r\n  nsc (macro S-; S-n a u s e o u s S-c a t S-;)\r\n  pld (macro S-; p l e a d i n g S-(r e a l) S-;)\r\n  cbk (macro S-; c a t b o n k S-;)\r\n  dbd (macro S-; d o f b l u s h t e c t i v e S-;)\r\n  bls (macro S-; b l u s h d o f S-;)\r\n  ;; cmini sequences\r\n  add (macro S-1 c m i n i spc a d d spc S-ret grv grv grv S-ret grv grv grv C-lft C-lft C-lft C-lft)\r\n  corpus (macro S-1 c m i n i spc c o r p u s spc)\r\n  swap! (macro S-1 c m i n i spc s w a p S-1 spc)\r\n  swap (macro S-1 c m i n i spc s w a p spc)\r\n  examples (macro S-1 c m i n i spc e x a m p l e s spc)\r\n  homerow (macro S-1 c m i n i spc h o m e r o w spc)\r\n  like (macro S-1 c m i n i spc l i k e spc)\r\n  likes (macro S-1 c m i n i spc l i k e s spc)\r\n  list (macro S-1 c m i n i spc l i s t spc)\r\n  remove (macro S-1 c m i n i spc r e m o v e spc)\r\n  rename (macro S-1 c m i n i spc r e n a m e spc)\r\n  search (macro S-1 c m i n i spc s e a r c h spc)\r\n  sfbs (macro S-1 c m i n i spc s f b s spc)\r\n  sfss (macro S-1 c m i n i spc s f s spc)\r\n  stats (macro S-1 c m i n i spc s t a t s spc)\r\n  unlike (macro S-1 c m i n i spc u n l i k e spc)\r\n  view (macro S-1 c m i n i spc v i e w spc)\r\n  names (macro S-1 c m i n i spc n a m e s S-ret grv grv grv S-ret grv grv grv)\r\n  dofball (macro S-1 c m i n i spc d o f b a l l spc) \r\n  catball (macro S-1 c m i n i spc c a t b a l l spc)\r\n  wooperball (macro S-1 c m i n i spc w o o p e r b a l l spc)\r\n  8ball (macro S-1 c m i n i spc 8 b a l l spc)\r\n  suggest (macro S-1 c m i n i spc s u g g e s t spc)\r\n  pairings (macro S-1 c m i n i spc p a i r i n g s spc)\r\n  freq (macro S-1 c m i n i spc f r e q spc)\r\n  cmini (macro S-1 c m i n i spc)\r\n\r\n  tnl (cmd powershell start-process wt.exe)\r\n  lvt (macro c d spc l e v e l t y p e / c m d ret 100 g o spc r u n spc m a i n . g o ret)\r\n  lyz (macro c d spc o x e y l y z e r ret 100 c a r g o spc r u n spc - - r e l e a s e ret)\r\n)\r\n\r\n;; where sequences are defined\r\n(defseq\r\n  f1 (f24 1)\r\n  f2 (f24 2)\r\n  f3 (f24 3)\r\n  f4 (f24 4)\r\n  f5 (f24 5)\r\n  f6 (f24 6)\r\n  f7 (f24 7)\r\n  f8 (f24 8)\r\n  f9 (f24 9)\r\n  f10 (f24 0)\r\n  f11 (f24 o 1)\r\n  f12 (f24 o 2)\r\n\r\n  dbl (d b l spc)\r\n  dnn (d n n spc)\r\n  dtv (d t v spc)\r\n  dsm (d s m spc)\r\n  dbn (d b n spc)\r\n  dxy (d x y spc)\r\n  dcb (d c b spc)\r\n  dwi (d w i spc)\r\n  dgn (d g n spc)\r\n  ddg (d d g spc)\r\n  dwn (d w n spc)\r\n  dqn (d q n spc)\r\n  dsi (d s i spc)\r\n  dkl (d k l spc)\r\n  dtr (d t r spc)\r\n  djl (d j l spc)\r\n  smd (s m d spc)\r\n  dcn (d c n spc)\r\n  dns (d n s spc)\r\n  dbr (d b r spc)\r\n  sbc (s b c spc)\r\n  ymc (y m c spc)\r\n  wgc (w g c spc)\r\n  wrc (w r c spc)\r\n  mnc (m n c spc)\r\n  hec (h e c spc)\r\n  blc (b l c spc)\r\n  htc (h t c spc)\r\n  cdc (c d c spc)\r\n  pnc (p n c spc)\r\n  ywc (y w c spc)\r\n  csp (c s p spc)\r\n  pbg (p b g spc)\r\n  rbg (r b g spc)\r\n  bbg (b b g spc)\r\n  wpy (w p y spc)\r\n  wpn (w p n spc)\r\n  dpt (d p t spc)\r\n  flc (f l c spc)\r\n  nsc (n s c spc)\r\n  pld (p l d spc)\r\n  cbk (c b k spc)\r\n  dbd (d b d spc)\r\n  bls (b l s spc)\r\n\r\n  add (, a spc)\r\n  corpus (, c p spc)\r\n  swap! (, s p spc)\r\n  swap (, s spc)\r\n  examples (, e spc)\r\n  homerow (, h spc)\r\n  like (, t spc)\r\n  likes (, t s spc)\r\n  list (, l spc)\r\n  remove (, r spc)\r\n  rename (, n spc)\r\n  search (, f spc)\r\n  sfbs (, f b spc)\r\n  sfss (, f s spc)\r\n  stats (, s t spc)\r\n  unlike (, u t spc)\r\n  view (, v spc)\r\n  names (, n s spc)\r\n  dofball (, d b spc)\r\n  catball (, c b spc)\r\n  wooperball (, w b spc)\r\n  8ball (, e b spc)\r\n  suggest (, g spc)\r\n  pairings (, p spc)\r\n  freq (, q spc)\r\n  cmini (, c spc)\r\n\r\n  tnl (t n l spc)\r\n  lvt (l v t spc)\r\n  lyz (l y z spc)\r\n)\r\n\r\n;; taipo chords\r\n(defchords l0 30\r\n  (ih                     ) e\r\n  (   mh                  ) t\r\n  (      rh               ) o\r\n  (         ph            ) a\r\n  (            iu         ) i\r\n  (               mu      ) n\r\n  (                  ru   ) s\r\n  (                     pu) r\r\n  (ih mh                  ) h\r\n  (      rh ph            ) l\r\n  (            iu mu      ) y\r\n  (                  ru pu) b\r\n  (            iu       pu) g\r\n  (   mh rh               ) u\r\n  (ih       ph            ) d\r\n  (               mu ru   ) p\r\n  (ih    rh               ) c\r\n  (   mh    ph            ) q\r\n  (            iu    ru   ) f\r\n  (               mu    pu) z\r\n  (ih                ru   ) v\r\n  (   mh                pu) x\r\n  (      rh    iu         ) k\r\n  (         ph    mu      ) j\r\n  (      rh       mu      ) -\r\n  (         ph iu         ) w\r\n  (ih                   pu) m\r\n  (   mh             ru   ) /\r\n  (         ph       ru   ) '\r\n  (      rh             pu) ;\r\n  (   mh       iu         ) S-/\r\n  (ih             mu      ) ,\r\n  (ih          iu         ) (one-shot $t lsft)\r\n  (   mh          mu      ) (one-shot $t lctl)\r\n  (      rh          ru   ) (one-shot $t lalt)\r\n  (         ph          pu) (one-shot $t lmet)\r\n  (ih mh rh               ) (one-shot $t ret)\r\n  (            iu mu ru   ) (one-shot $t tab)\r\n)\r\n\r\n(defchords l1 30\r\n  (ih1                            ) S-e\r\n  (    mh1                        ) S-t\r\n  (        rh1                    ) S-o\r\n  (            ph1                ) S-a\r\n  (                iu1            ) S-i\r\n  (                    mu1        ) S-n\r\n  (                        ru1    ) S-s\r\n  (                            pu1) S-r\r\n  (ih1 mh1                        ) S-h\r\n  (        rh1 ph1                ) S-l\r\n  (                iu1 mu1        ) S-y\r\n  (                        ru1 pu1) S-b\r\n  (                iu1         pu1) S-g\r\n  (    mh1 rh1                    ) S-u\r\n  (ih1         ph1                ) S-d\r\n  (                    mu1 ru1    ) S-p\r\n  (ih1     rh1                    ) S-c\r\n  (    mh1     ph1                ) S-q\r\n  (                iu1     ru1    ) S-f\r\n  (                    mu1     pu1) S-z\r\n  (ih1                     ru1    ) S-v\r\n  (    mh1                     pu1) S-x\r\n  (        rh1     iu1            ) S-k\r\n  (            ph1     mu1        ) S-j\r\n  (        rh1         mu1        ) S--\r\n  (            ph1 iu1            ) S-w\r\n  (ih1                         pu1) S-m\r\n  (    mh1                 ru1    ) \\\r\n  (            ph1         ru1    ) S-'\r\n  (        rh1                 pu1) S-;\r\n  (    mh1         iu1            ) S-1\r\n  (ih1                 mu1        ) .\r\n  (ih1             iu1            ) (one-shot $t lft)\r\n  (    mh1             mu1        ) (one-shot $t down)\r\n  (        rh1             ru1    ) (one-shot $t up)\r\n  (            ph1             pu1) (one-shot $t rght)\r\n  (ih1 mh1 rh1                    ) (one-shot $t esc)\r\n  (                iu1 mu1 ru1    ) (one-shot $t del)\r\n)\r\n\r\n(defchords l2 30\r\n  (ih2                            ) S-9\r\n  (    mh2                        ) [\r\n  (        rh2                    ) S-[\r\n  (            ph2                ) S-,\r\n  (                iu2            ) S-0\r\n  (                    mu2        ) ]\r\n  (                        ru2    ) S-]\r\n  (                            pu2) S-.\r\n  (ih2 mh2                        ) 0\r\n  (        rh2 ph2                ) 4\r\n  (                iu2 mu2        ) 5\r\n  (                        ru2 pu2) 9\r\n  (                iu2         pu2) S-3\r\n  (    mh2 rh2                    ) 2\r\n  (ih2         ph2                ) S-2\r\n  (                    mu2 ru2    ) 7\r\n  (ih2     rh2                    ) 1\r\n  (    mh2     ph2                ) 3\r\n  (                iu2     ru2    ) 6\r\n  (                    mu2     pu2) 8\r\n  (ih2                     ru2    ) S-8\r\n  (    mh2                     pu2) S-6\r\n  (        rh2     iu2            ) +\r\n  (            ph2     mu2        ) =\r\n  (        rh2         mu2        ) S-5\r\n  (            ph2 iu2            ) S-7\r\n  (ih2                         pu2) S-4\r\n  (    mh2                 ru2    ) S-\\\r\n  (            ph2         ru2    ) `\r\n  (ih2                 mu2        ) S-`\r\n  (ih2             iu2            ) (one-shot $t pgdn)\r\n  (    mh2             mu2        ) (one-shot $t end)\r\n  (        rh2             ru2    ) (one-shot $t home)\r\n  (            ph2             pu2) (one-shot $t pgup)\r\n  (ih2 mh2 rh2                    ) (one-shot $t ralt)\r\n  (                iu2 mu2 ru2    ) @fn\r\n)\r\n\r\n;; layouts layer\r\n(deflayer layouts\r\n  _     @qwr  @my   lrld  _     _     _     _     _     _     _     _     _     _\r\n  _     @tp   _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     _     _     _     _     _     _     _     _     _     _     _ \r\n  _     _     _                 _                 _     _\r\n)\r\n\r\n;; taipo layers, hidden at the bottom because they look ugly\r\n(deflayer l0\r\n  @grl  _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     @pu   @ru   @mu   @iu   _     _     _     _     @iu   @mu   @ru   @pu   @pu\r\n  _     @ph   @rh   @mh   @ih   _     _     _     _     @ih   @mh   @rh   @ph\r\n  _     _     _     _     _     _     _     _     _     _     _     _ \r\n  @l2   _     @l1               _                 _     _\r\n)\r\n\r\n(deflayer l1\r\n  @grl  _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     @pu1  @ru1  @mu1  @iu1  _     _     _     _     @iu1  @mu1  @ru1  @pu1  @pu1\r\n  _     @ph1  @rh1  @mh1  @ih1  _     _     _     _     @ih1  @mh1  @rh1  @ph1\r\n  _     _     _     _     _     _     _     _     _     _     _     _ \r\n  @l2   _     _                 _                 _     _\r\n)\r\n\r\n(deflayer l2\r\n  @grl  _     _     _     _     _     _     _     _     _     _     _     _     _\r\n  _     @pu2  @ru2  @mu2  @iu2  _     _     _     _     @iu2  @mu2  @ru2  @pu2  @pu2\r\n  _     @ph2  @rh2  @mh2  @ih2  _     _     _     _     @ih2  @mh2  @rh2  @ph2\r\n  _     _     _     _     _     _     _     _     _     _     _     _ \r\n  _     _     @l1               _                 _     _\r\n)\r\n```\r\n\r\n**To reproduce**\r\nuse the config above, press space (starts sequence leader) then type `,q`.\r\n\r\n**Expected behavior**\r\n`!cmini freq ` to be outputted.\r\n\r\n**Operating system**\r\nWindows 11\r\n\r\n**Additional context**\r\nkanata sometimes crashes randomly without typing a sequence but I can't find a way to replicate it.", "pull_message": "fix: sequence mode crashing\n", "hints": [], "created_at": "2023-06-19T03:32:06Z", "cursor": "Y3Vyc29yOnYyOpK5MjAyMy0wNi0xOVQxMTozMjowNiswODowMM5TS3AA", "merge_commit_sha": "f98cbf80b8fdf4589f90a404015c32bbd51b5452", "test_files": [], "precommit_script": "", "setup_command": "#!/usr/bin/env bash\nset -euo pipefail\n\n# Minimal environment setup for running tests in this Rust workspace.\n# This script avoids using sudo and installs rustup (and the Rust toolchain) if\n# cargo is not already present.\n\nif ! command -v cargo >/dev/null 2>&1; then\n  echo \"cargo not found, installing rustup and Rust toolchain...\"\n  # Install rustup (non-interactive)\n  curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y\n  # Add cargo to PATH for the current session\n  export PATH=\"$HOME/.cargo/bin:$PATH\"\nelse\n  echo \"cargo found: $(cargo --version)\"\nfi\n\n# Ensure Python is available\nif ! command -v python3 >/dev/null 2>&1; then\n  echo \"python3 is required but not found. Please install Python3.\"\n  exit 1\nfi\n\n# No additional Python packages are required because test output is converted\n# to JUnit XML using the standard library.\n\necho \"setup complete\"\n\ncargo fetch --locked\n", "test_command": "", "additions": 3, "deletions": 1, "file_changes": 1, "image": "acvdpwu2p001dcr.azurecr.io/jtroo__kanata-454:20251201"}
